<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduTracker - Student Management App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'green-primary': '#10b981',
                        'green-secondary': '#059669',
                        'green-light': '#d1fae5',
                        'green-dark': '#064e3b'
                    }
                }
            }
        }
    </script>
    <style>
        .dark-mode {
            background-color: #111827 !important;
            color: #f9fafb !important;
        }
        .dark-mode * {
            border-color: #374151 !important;
        }
        .dark-mode .bg-white {
            background-color: #1f2937 !important;
            color: #f9fafb !important;
        }
        body:not(.dark-mode) .bg-white {
            background-color: #ffffff !important;
            color: #111827 !important;
        }
        body:not(.dark-mode) .text-gray-900 {
            color: #111827 !important;
        }
        body:not(.dark-mode) .text-gray-700 {
            color: #374151 !important;
        }
        body:not(.dark-mode) .text-gray-600 {
            color: #4b5563 !important;
        }
        body:not(.dark-mode) .text-gray-500 {
            color: #6b7280 !important;
        }
        body:not(.dark-mode) .text-gray-400 {
            color: #9ca3af !important;
        }
        body:not(.dark-mode) .text-gray-300 {
            color: #d1d5db !important;
        }
        body:not(.dark-mode) .bg-gray-300 {
            background-color: #d1d5db !important;
            color: #374151 !important;
        }
        .dark-mode .bg-gray-50 {
            background-color: #111827 !important;
        }
        .dark-mode .bg-gray-100 {
            background-color: #374151 !important;
            color: #f9fafb !important;
        }
        .dark-mode .bg-gray-200 {
            background-color: #4b5563 !important;
        }
        .dark-mode .text-gray-900 {
            color: #f9fafb !important;
        }
        .dark-mode .text-gray-700 {
            color: #d1d5db !important;
        }
        .dark-mode .text-gray-600 {
            color: #9ca3af !important;
        }
        .dark-mode .text-gray-500 {
            color: #6b7280 !important;
        }
        .dark-mode .text-gray-400 {
            color: #9ca3af !important;
        }
        .dark-mode .text-gray-300 {
            color: #d1d5db !important;
        }
        .dark-mode .border-gray-200 {
            border-color: #374151 !important;
        }
        .dark-mode .border-gray-300 {
            border-color: #4b5563 !important;
        }
        .dark-mode .border-gray-600 {
            border-color: #4b5563 !important;
        }
        .dark-mode .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.4) !important;
        }
        .dark-mode input, .dark-mode select, .dark-mode textarea {
            background-color: #374151 !important;
            color: #f9fafb !important;
            border-color: #4b5563 !important;
        }
        .dark-mode input:focus, .dark-mode select:focus, .dark-mode textarea:focus {
            border-color: #10b981 !important;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1) !important;
        }
        body:not(.dark-mode) .bg-green-light {
            background-color: #d1fae5 !important;
            color: #111827 !important;
        }
        .dark-mode .bg-green-light {
            background-color: #064e3b !important;
        }
        .dark-mode .text-green-secondary {
            color: #34d399 !important;
        }
        .dark-mode .bg-green-100 {
            background-color: #064e3b !important;
        }
        .dark-mode .text-green-800 {
            color: #a7f3d0 !important;
        }
        .dark-mode .bg-green-900 {
            background-color: #064e3b !important;
        }
        .dark-mode .text-green-200 {
            color: #a7f3d0 !important;
        }
        .dark-mode .hover\:bg-gray-200:hover {
            background-color: #4b5563 !important;
        }
        .dark-mode .bg-gray-800 {
            background-color: #1f2937 !important;
        }
        .dark-mode .bg-gray-700 {
            background-color: #374151 !important;
        }
        .dark-mode .bg-gray-600 {
            background-color: #4b5563 !important;
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50 transition-all duration-300">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">UT</span>
                    </div>
                    <h1 class="text-xl font-semibold text-gray-900">UniTrack</h1>
                </div>
                <div class="flex items-center space-x-3">
                    <button id="darkModeToggle" class="px-3 py-1 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors text-sm font-medium">
                        <span id="darkModeText">Dark</span>
                    </button>
                    <button id="logoutBtn" class="px-3 py-1 rounded-lg bg-red-100 hover:bg-red-200 text-red-700 transition-colors text-sm font-medium">
                        Logout
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center px-4">
        <div class="max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-green-500 rounded-xl flex items-center justify-center mx-auto mb-4">
                    <span class="text-white font-bold text-2xl">UT</span>
                </div>
                <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Welcome to UniTrack</h1>
                <p class="text-gray-600 dark:text-gray-400 mt-2">Sign in to access your dashboard</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Username</label>
                    <input type="text" id="loginUsername" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="Enter your username" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Password</label>
                    <input type="password" id="loginPassword" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-green-500" placeholder="Enter your password" required>
                </div>
                
                <div class="flex items-center justify-between">
                    <label class="flex items-center">
                        <input type="checkbox" id="rememberMe" class="w-4 h-4 text-green-500 border-gray-300 dark:border-gray-600 rounded focus:ring-green-500">
                        <span class="ml-2 text-sm text-gray-600 dark:text-gray-400">Remember me</span>
                    </label>
                    <button type="button" class="text-sm text-green-500 hover:text-green-600">Forgot password?</button>
                </div>
                
                <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg font-medium transition-colors">
                    Sign In
                </button>
            </form>
            
            <div class="mt-6 text-center space-y-2">
                <p class="text-sm text-gray-500 dark:text-gray-400">
                    <strong>Student:</strong> username: <strong>student</strong>, password: <strong>demo123</strong>
                </p>
                <p class="text-sm text-gray-500 dark:text-gray-400">
                    <strong>Teacher:</strong> username: <strong>teacher</strong>, password: <strong>demo123</strong>
                </p>
            </div>
        </div>
    </div>

    <!-- Teacher Dashboard -->
    <main id="teacherContent" class="max-w-7xl mx-auto px-4 py-6 space-y-8 hidden">
        <!-- ID Selection Section -->
        <section class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
            <h2 class="text-xl sm:text-2xl font-semibold text-gray-900 mb-6">Select Your Instructor ID</h2>
            <div class="grid grid-cols-2 sm:grid-cols-5 gap-3">
                <button onclick="selectTeacherId('001')" id="id-001" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">001</div>
                </button>
                <button onclick="selectTeacherId('002')" id="id-002" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">002</div>
                </button>
                <button onclick="selectTeacherId('003')" id="id-003" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">003</div>
                </button>
                <button onclick="selectTeacherId('004')" id="id-004" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">004</div>
                </button>
                <button onclick="selectTeacherId('005')" id="id-005" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">005</div>
                </button>
                <button onclick="selectTeacherId('006')" id="id-006" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">006</div>
                </button>
                <button onclick="selectTeacherId('007')" id="id-007" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">007</div>
                </button>
                <button onclick="selectTeacherId('008')" id="id-008" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">008</div>
                </button>
                <button onclick="selectTeacherId('009')" id="id-009" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">009</div>
                </button>
                <button onclick="selectTeacherId('010')" id="id-010" class="p-3 border-2 border-gray-300 dark:border-gray-600 rounded-lg hover:border-green-500 transition-colors text-center">
                    <div class="font-mono font-bold text-lg">010</div>
                </button>
            </div>
            <div id="selectedIdInfo" class="mt-4 p-4 bg-green-50 dark:bg-green-900 rounded-lg hidden">
                <p class="text-green-800 dark:text-green-200">Selected ID: <span id="selectedIdDisplay" class="font-mono font-bold"></span></p>
                <p class="text-sm text-green-600 dark:text-green-300 mt-1">Students can now send messages to this ID</p>
            </div>
        </section>

        <!-- Teacher Messages Section -->
        <section class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
            <h2 class="text-xl sm:text-2xl font-semibold text-gray-900 mb-6">Student Messages</h2>
            <div id="teacherMessageList" class="space-y-3">
                <div class="text-center py-12 text-gray-500">
                    <div class="text-6xl mb-4">üì¨</div>
                    <p class="text-base">No messages from students yet</p>
                    <p class="text-sm text-gray-400">Select your ID above to start receiving messages</p>
                </div>
            </div>
        </section>
    </main>

    <!-- Main Content -->
    <main id="mainContent" class="max-w-7xl mx-auto px-4 py-6 space-y-8 hidden">
        <!-- Schedule Section -->
        <section id="schedule" class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-900">Class Schedule</h2>
                <button id="addScheduleBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition-colors w-full sm:w-auto">
                    Add Class
                </button>
            </div>
            <div id="scheduleList" class="space-y-3">
                <div class="text-center py-12 text-gray-500">
                    <p class="text-base">No classes scheduled yet</p>
                    <p class="text-sm text-gray-400">Click "Add Class" to get started</p>
                </div>
            </div>
        </section>

        <!-- Instructors Section -->
        <section id="instructors" class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-900">Instructor Contacts</h2>
            </div>
            <div id="instructorList" class="space-y-3">
                <!-- Instructors will be loaded here -->
            </div>
        </section>

        <!-- Assignments Section -->
        <section id="assignments" class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
            <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center mb-6 gap-4">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-900">Assignments & Reminders</h2>
                <button id="addAssignmentBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition-colors w-full sm:w-auto">
                    Add Assignment
                </button>
            </div>
            <div id="assignmentList" class="space-y-3">
                <div class="text-center py-12 text-gray-500">
                    <p class="text-base">No assignments yet</p>
                    <p class="text-sm text-gray-400">Click "Add Assignment" to get started</p>
                </div>
            </div>
        </section>



        <!-- Messages Section -->
        <section id="messages" class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
            <h2 class="text-xl sm:text-2xl font-semibold text-gray-900 mb-6">Received Messages</h2>
            <div id="messageList" class="space-y-3">
                <div class="text-center py-12 text-gray-500">
                    <p class="text-base">No messages received yet</p>
                    <p class="text-sm text-gray-400">Messages from instructors will appear here</p>
                </div>
            </div>
        </section>

        <!-- Suggestions Section -->
        <section id="suggestions" class="space-y-6">
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
                <h2 class="text-xl sm:text-2xl font-semibold text-gray-900 mb-6">Send Suggestion</h2>
                <form id="suggestionForm" class="space-y-4">
                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                            <select id="suggestionCategory" class="w-full p-3 border border-gray-300 rounded-lg bg-white text-gray-900">
                                <option value="feature">Feature Request</option>
                                <option value="bug">Bug Report</option>
                                <option value="improvement">Improvement</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Subject</label>
                            <input type="text" id="suggestionSubject" class="w-full p-3 border border-gray-300 rounded-lg bg-white text-gray-900" placeholder="Brief description of your suggestion">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Details</label>
                        <textarea id="suggestionDetails" rows="4" class="w-full p-3 border border-gray-300 rounded-lg bg-white text-gray-900" placeholder="Please provide detailed information about your suggestion..."></textarea>
                    </div>
                    <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white py-3 rounded-lg transition-colors">
                        Send Suggestion
                    </button>
                </form>
            </div>

            <!-- Sent Suggestions -->
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 sm:p-6">
                <h3 class="text-lg sm:text-xl font-semibold text-gray-900 mb-4">Your Suggestions</h3>
                <div id="sentSuggestions" class="space-y-3">
                    <div class="text-center py-8 text-gray-500">
                        <p>No suggestions sent yet</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <!-- Schedule Modal -->
    <div id="scheduleModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Add Class Schedule</h3>
            <form id="scheduleForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Subject</label>
                    <input type="text" id="scheduleSubject" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Day</label>
                    <select id="scheduleDay" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                        <option value="Monday">Monday</option>
                        <option value="Tuesday">Tuesday</option>
                        <option value="Wednesday">Wednesday</option>
                        <option value="Thursday">Thursday</option>
                        <option value="Friday">Friday</option>
                        <option value="Saturday">Saturday</option>
                        <option value="Sunday">Sunday</option>
                    </select>
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Start Time</label>
                        <input type="time" id="scheduleStartTime" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">End Time</label>
                        <input type="time" id="scheduleEndTime" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Room</label>
                    <input type="text" id="scheduleRoom" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancelSchedule" class="flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg">Cancel</button>
                    <button type="submit" class="flex-1 bg-green-primary text-white py-2 rounded-lg">Save</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Message Modal -->
    <div id="messageModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Send Message</h3>
            <div class="mb-4">
                <p class="text-sm text-gray-600 dark:text-gray-400">To: <span id="messageRecipient" class="font-medium text-gray-900 dark:text-white"></span></p>
                <p class="text-sm text-gray-600 dark:text-gray-400">ID: <span id="messageRecipientId" class="font-medium text-gray-900 dark:text-white"></span></p>
                <p class="text-sm text-gray-600 dark:text-gray-400">Subject: <span id="messageSubject" class="font-medium text-gray-900 dark:text-white"></span></p>
            </div>
            <form id="messageForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Message</label>
                    <textarea id="messageContent" rows="4" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" placeholder="Type your message here..." required></textarea>
                </div>
                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancelMessage" class="flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg">Cancel</button>
                    <button type="submit" class="flex-1 bg-green-primary text-white py-2 rounded-lg">Send Message</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Assignment Modal -->
    <div id="assignmentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md mx-4">
            <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4">Add Assignment</h3>
            <form id="assignmentForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Title</label>
                    <input type="text" id="assignmentTitle" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Subject</label>
                    <input type="text" id="assignmentSubject" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Type</label>
                    <select id="assignmentType" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                        <option value="Assignment">Assignment</option>
                        <option value="Project">Project</option>
                        <option value="Exam">Exam</option>
                        <option value="Quiz">Quiz</option>
                        <option value="Reminder">Reminder</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Due Date</label>
                    <input type="date" id="assignmentDate" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white" required>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Due Time</label>
                    <input type="time" id="assignmentTime" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white">
                </div>

                <div class="flex space-x-3 pt-4">
                    <button type="button" id="cancelAssignment" class="flex-1 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 py-2 rounded-lg">Cancel</button>
                    <button type="submit" class="flex-1 bg-green-primary text-white py-2 rounded-lg">Save</button>
                </div>
            </form>
        </div>
    </div>



    <script>
        // Authentication
        let isLoggedIn = localStorage.getItem('edutracker_logged_in') === 'true';
        
        // Data storage
        let schedules = JSON.parse(localStorage.getItem('edutracker_schedules')) || [];
        let assignments = JSON.parse(localStorage.getItem('edutracker_assignments')) || [];
        let suggestions = JSON.parse(localStorage.getItem('edutracker_suggestions')) || [];
        let messages = JSON.parse(localStorage.getItem('edutracker_messages')) || [];

        // Predefined instructors with ID numbers (editable)
        let instructors = JSON.parse(localStorage.getItem('edutracker_instructors_data')) || [
            { id: '001', name: '', subject: '' },
            { id: '002', name: '', subject: '' },
            { id: '003', name: '', subject: '' },
            { id: '004', name: '', subject: '' },
            { id: '005', name: '', subject: '' },
            { id: '006', name: '', subject: '' },
            { id: '007', name: '', subject: '' },
            { id: '008', name: '', subject: '' },
            { id: '009', name: '', subject: '' },
            { id: '010', name: '', subject: '' }
        ];

        function updateInstructor(id, field, value) {
            const instructor = instructors.find(i => i.id === id);
            if (instructor) {
                instructor[field] = value;
                localStorage.setItem('edutracker_instructors_data', JSON.stringify(instructors));
            }
        }

        // Login functionality
        document.getElementById('loginForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            // Simple authentication (in real app, this would be server-side)
            if ((username === 'student' || username === 'teacher') && password === 'demo123') {
                localStorage.setItem('edutracker_logged_in', 'true');
                localStorage.setItem('edutracker_username', username);
                localStorage.setItem('edutracker_usertype', username);
                isLoggedIn = true;
                if (username === 'teacher') {
                    showTeacherApp();
                } else {
                    showMainApp();
                    renderInstructors();
                    renderSchedules();
                    renderAssignments();
                    renderMessages();
                    renderSuggestions();
                }
            } else {
                alert('Invalid credentials. Please use correct username and password.');
            }
        });

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', () => {
            localStorage.removeItem('edutracker_logged_in');
            localStorage.removeItem('edutracker_username');
            isLoggedIn = false;
            showLoginScreen();
        });

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('teacherContent').classList.add('hidden');
            document.querySelector('header').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
            document.getElementById('teacherContent').classList.add('hidden');
            document.querySelector('header').classList.remove('hidden');
        }

        function showTeacherApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('teacherContent').classList.remove('hidden');
            document.querySelector('header').classList.remove('hidden');
        }

        // Dark mode
        const darkModeToggle = document.getElementById('darkModeToggle');
        const darkModeText = document.getElementById('darkModeText');
        const isDarkMode = localStorage.getItem('edutracker_darkmode') === 'true';
        
        if (isDarkMode) {
            document.body.classList.add('dark-mode');
            darkModeText.textContent = 'Light';
        }

        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            darkModeText.textContent = isDark ? 'Light' : 'Dark';
            localStorage.setItem('edutracker_darkmode', isDark);
        });

        // Smooth scrolling for better UX
        document.documentElement.style.scrollBehavior = 'smooth';

        // Modal functions
        function showModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
            document.getElementById(modalId).classList.add('flex');
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
            document.getElementById(modalId).classList.remove('flex');
        }

        // Schedule functions
        document.getElementById('addScheduleBtn').addEventListener('click', () => showModal('scheduleModal'));
        document.getElementById('cancelSchedule').addEventListener('click', () => hideModal('scheduleModal'));

        document.getElementById('scheduleForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const schedule = {
                id: Date.now(),
                subject: document.getElementById('scheduleSubject').value,
                day: document.getElementById('scheduleDay').value,
                startTime: document.getElementById('scheduleStartTime').value,
                endTime: document.getElementById('scheduleEndTime').value,
                room: document.getElementById('scheduleRoom').value
            };
            
            schedules.push(schedule);
            localStorage.setItem('edutracker_schedules', JSON.stringify(schedules));
            renderSchedules();
            hideModal('scheduleModal');
            document.getElementById('scheduleForm').reset();
        });

        function renderSchedules() {
            const container = document.getElementById('scheduleList');
            
            if (schedules.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500 dark:text-gray-400">
                        <div class="text-6xl mb-4">üìÖ</div>
                        <p class="text-lg">No classes scheduled yet</p>
                        <p class="text-sm">Click "Add Class" to get started</p>
                    </div>
                `;
                return;
            }

            const sortedSchedules = schedules.sort((a, b) => {
                const dayOrder = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];
                const dayDiff = dayOrder.indexOf(a.day) - dayOrder.indexOf(b.day);
                if (dayDiff !== 0) return dayDiff;
                return a.startTime.localeCompare(b.startTime);
            });

            container.innerHTML = sortedSchedules.map(schedule => `
                <div class="bg-green-light dark:bg-gray-700 rounded-lg p-4 border-l-4 border-green-primary">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 dark:text-white text-lg">${schedule.subject}</h3>
                            <p class="text-green-secondary dark:text-green-400 font-medium">${schedule.day}</p>
                            <p class="text-gray-600 dark:text-gray-300">${schedule.startTime} - ${schedule.endTime}</p>
                            ${schedule.room ? `<p class="text-gray-500 dark:text-gray-400">Room: ${schedule.room}</p>` : ''}
                        </div>
                        <button onclick="deleteSchedule(${schedule.id})" class="text-red-500 hover:text-red-700 px-2 py-1 text-sm self-start">
                            Delete
                        </button>
                    </div>
                </div>
            `).join('');
        }

        function deleteSchedule(id) {
            schedules = schedules.filter(s => s.id !== id);
            localStorage.setItem('edutracker_schedules', JSON.stringify(schedules));
            renderSchedules();
        }

        // Instructor functions
        function renderInstructors() {
            const container = document.getElementById('instructorList');
            
            container.innerHTML = instructors.map(instructor => `
                <div class="bg-white dark:bg-gray-700 rounded-lg p-4 sm:p-6 border border-gray-200 dark:border-gray-600 shadow-sm">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-4 gap-2">
                        <div class="flex-1">
                            <div class="flex items-center gap-3 mb-2">
                                <input type="text" value="${instructor.name}" placeholder="Enter instructor name" onchange="updateInstructor('${instructor.id}', 'name', this.value)" class="font-semibold text-gray-900 dark:text-white text-lg sm:text-xl bg-transparent border-b border-gray-300 dark:border-gray-600 focus:border-green-500 outline-none">
                                <span class="bg-blue-100 dark:bg-gray-600 text-blue-700 dark:text-gray-300 px-2 py-1 rounded text-sm font-mono">ID: ${instructor.id}</span>
                            </div>
                            <input type="text" value="${instructor.subject}" placeholder="Enter subject" onchange="updateInstructor('${instructor.id}', 'subject', this.value)" class="text-green-secondary dark:text-green-400 font-medium bg-transparent border-b border-gray-300 dark:border-gray-600 focus:border-green-500 outline-none w-full">
                        </div>
                    </div>
                    <div class="mt-4">
                        <button onclick="openMessageModal('${instructor.name}', '${instructor.subject}', '${instructor.id}')" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm transition-colors">
                            Send Message
                        </button>
                    </div>
                </div>
            `).join('');
        }

        let currentMessageRecipient = '';
        let currentMessageSubject = '';
        let currentMessageRecipientId = '';

        function openMessageModal(instructorName, subject, instructorId) {
            currentMessageRecipient = instructorName;
            currentMessageSubject = subject;
            currentMessageRecipientId = instructorId;
            document.getElementById('messageRecipient').textContent = instructorName;
            document.getElementById('messageSubject').textContent = subject;
            document.getElementById('messageRecipientId').textContent = instructorId;
            showModal('messageModal');
        }

        document.getElementById('cancelMessage').addEventListener('click', () => {
            hideModal('messageModal');
            document.getElementById('messageForm').reset();
        });

        document.getElementById('messageForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const messageContent = document.getElementById('messageContent').value.trim();
            if (messageContent) {
                // Send message to teacher's message system
                const teacherMessage = {
                    id: Date.now(),
                    teacherId: currentMessageRecipientId,
                    content: messageContent,
                    date: new Date().toLocaleDateString(),
                    time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
                };
                
                teacherMessages.push(teacherMessage);
                localStorage.setItem('edutracker_teacher_messages', JSON.stringify(teacherMessages));
                
                alert(`Message sent to ${currentMessageRecipient} (ID: ${currentMessageRecipientId})!\n\nYour message: "${messageContent}"\n\nThey will receive your message in their teacher dashboard.`);
                
                // Simulate instructor response after a short delay
                setTimeout(() => {
                    const responses = [
                        "Thank you for your message. I'll get back to you during my office hours.",
                        "I received your message. Please see me after class to discuss further.",
                        "Thanks for reaching out. I'll review this and respond soon.",
                        "I appreciate your question. Let's discuss this in more detail during office hours.",
                        "Your message is noted. I'll provide feedback on this topic in our next class."
                    ];
                    
                    const response = responses[Math.floor(Math.random() * responses.length)];
                    
                    const receivedMessage = {
                        id: Date.now(),
                        from: currentMessageRecipient,
                        fromId: currentMessageRecipientId,
                        subject: currentMessageSubject,
                        originalMessage: messageContent,
                        response: response,
                        date: new Date().toLocaleDateString(),
                        time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
                    };
                    
                    messages.push(receivedMessage);
                    localStorage.setItem('edutracker_messages', JSON.stringify(messages));
                    renderMessages();
                    
                    alert(`New message received from ${currentMessageRecipient} (ID: ${currentMessageRecipientId})!`);
                }, 2000);
                
                hideModal('messageModal');
                document.getElementById('messageForm').reset();
            }
        });

        // Message functions
        function renderMessages() {
            const container = document.getElementById('messageList');
            
            if (messages.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500 dark:text-gray-400">
                        <div class="text-6xl mb-4">üì¨</div>
                        <p class="text-lg">No messages received yet</p>
                        <p class="text-sm">Messages from instructors will appear here</p>
                    </div>
                `;
                return;
            }

            const sortedMessages = messages.sort((a, b) => b.id - a.id);

            container.innerHTML = sortedMessages.map(message => `
                <div class="bg-blue-50 dark:bg-gray-700 rounded-lg p-4 border-l-4 border-blue-500">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 mb-3">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <h3 class="font-semibold text-gray-900 dark:text-white text-lg">From: ${message.from}</h3>
                                <span class="bg-blue-100 dark:bg-gray-600 text-blue-700 dark:text-gray-300 px-2 py-1 rounded text-xs font-mono">ID: ${message.fromId}</span>
                            </div>
                            <p class="text-blue-600 dark:text-blue-400 font-medium">${message.subject}</p>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">${message.date} at ${message.time}</p>
                        </div>
                        <button onclick="deleteMessage(${message.id})" class="text-red-500 hover:text-red-700 px-2 py-1 text-sm self-start">
                            Delete
                        </button>
                    </div>
                    <div class="space-y-3">
                        <div class="bg-gray-100 dark:bg-gray-600 rounded-lg p-3">
                            <p class="text-sm text-gray-600 dark:text-gray-300 mb-1"><strong>Your message:</strong></p>
                            <p class="text-gray-800 dark:text-gray-200">${message.originalMessage}</p>
                        </div>
                        <div class="bg-green-50 dark:bg-green-900 rounded-lg p-3">
                            <p class="text-sm text-green-600 dark:text-green-300 mb-1"><strong>Instructor's response:</strong></p>
                            <p class="text-green-800 dark:text-green-200">${message.response}</p>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function deleteMessage(id) {
            messages = messages.filter(m => m.id !== id);
            localStorage.setItem('edutracker_messages', JSON.stringify(messages));
            renderMessages();
        }



        // Assignment functions
        document.getElementById('addAssignmentBtn').addEventListener('click', () => showModal('assignmentModal'));
        document.getElementById('cancelAssignment').addEventListener('click', () => hideModal('assignmentModal'));

        document.getElementById('assignmentForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const assignment = {
                id: Date.now(),
                title: document.getElementById('assignmentTitle').value,
                subject: document.getElementById('assignmentSubject').value,
                type: document.getElementById('assignmentType').value,
                date: document.getElementById('assignmentDate').value,
                time: document.getElementById('assignmentTime').value,
                completed: false
            };
            
            assignments.push(assignment);
            localStorage.setItem('edutracker_assignments', JSON.stringify(assignments));
            renderAssignments();
            hideModal('assignmentModal');
            document.getElementById('assignmentForm').reset();
        });

        function renderAssignments() {
            const container = document.getElementById('assignmentList');
            
            if (assignments.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500 dark:text-gray-400">
                        <div class="text-6xl mb-4">üìù</div>
                        <p class="text-lg">No assignments yet</p>
                        <p class="text-sm">Click "Add Assignment" to get started</p>
                    </div>
                `;
                return;
            }

            const sortedAssignments = assignments.sort((a, b) => {
                if (a.completed !== b.completed) return a.completed - b.completed;
                return new Date(a.date + ' ' + (a.time || '00:00')) - new Date(b.date + ' ' + (b.time || '00:00'));
            });

            container.innerHTML = sortedAssignments.map(assignment => {
                const dueDate = new Date(assignment.date + ' ' + (assignment.time || '00:00'));
                const now = new Date();
                const isOverdue = dueDate < now && !assignment.completed;
                const isDueSoon = dueDate - now < 24 * 60 * 60 * 1000 && dueDate > now && !assignment.completed;

                return `
                    <div class="bg-white dark:bg-gray-700 rounded-lg p-4 border-l-4 ${
                        assignment.completed ? 'border-gray-400 opacity-75' :
                        isOverdue ? 'border-red-500' :
                        isDueSoon ? 'border-yellow-500' :
                        'border-green-primary'
                    }">
                        <div class="flex flex-col sm:flex-row sm:justify-between gap-3">
                            <div class="flex items-start space-x-3 flex-1">
                                <input type="checkbox" ${assignment.completed ? 'checked' : ''} 
                                       onchange="toggleAssignment(${assignment.id})"
                                       class="mt-1 w-5 h-5 text-green-primary rounded flex-shrink-0">
                                <div class="flex-1 min-w-0">
                                    <h3 class="font-semibold text-gray-900 dark:text-white ${assignment.completed ? 'line-through' : ''} break-words">${assignment.title}</h3>
                                    <div class="flex flex-wrap items-center gap-2 text-sm text-gray-600 dark:text-gray-300 mt-1">
                                        <span class="bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded whitespace-nowrap">${assignment.type}</span>
                                        <span class="break-words">${assignment.subject}</span>
                                    </div>
                                    <p class="text-gray-600 dark:text-gray-300 mt-2">
                                        Due: ${new Date(assignment.date).toLocaleDateString()}
                                        ${assignment.time ? ` at ${assignment.time}` : ''}
                                    </p>
                                    ${isOverdue ? '<p class="text-red-500 text-sm font-medium mt-1">Overdue</p>' : ''}
                                    ${isDueSoon ? '<p class="text-yellow-600 text-sm font-medium mt-1">Due soon</p>' : ''}
                                </div>
                            </div>
                            <button onclick="deleteAssignment(${assignment.id})" class="text-red-500 hover:text-red-700 px-2 py-1 text-sm self-start flex-shrink-0">
                                Delete
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function toggleAssignment(id) {
            const assignment = assignments.find(a => a.id === id);
            if (assignment) {
                assignment.completed = !assignment.completed;
                localStorage.setItem('edutracker_assignments', JSON.stringify(assignments));
                renderAssignments();
            }
        }

        function deleteAssignment(id) {
            assignments = assignments.filter(a => a.id !== id);
            localStorage.setItem('edutracker_assignments', JSON.stringify(assignments));
            renderAssignments();
        }

        // Suggestion functions
        document.getElementById('suggestionForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const suggestion = {
                id: Date.now(),
                category: document.getElementById('suggestionCategory').value,
                subject: document.getElementById('suggestionSubject').value,
                details: document.getElementById('suggestionDetails').value,
                date: new Date().toLocaleDateString(),
                status: 'Sent'
            };
            
            suggestions.push(suggestion);
            localStorage.setItem('edutracker_suggestions', JSON.stringify(suggestions));
            renderSuggestions();
            document.getElementById('suggestionForm').reset();
            
            // Show success message
            alert('Thank you for your suggestion! We appreciate your feedback.');
        });

        function renderSuggestions() {
            const container = document.getElementById('sentSuggestions');
            
            if (suggestions.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8 text-gray-500 dark:text-gray-400">
                        <p>No suggestions sent yet</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = suggestions.map(suggestion => `
                <div class="bg-white dark:bg-gray-600 rounded-lg p-4 border border-gray-200 dark:border-gray-500">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900 dark:text-white">${suggestion.subject}</h4>
                        <span class="text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 px-2 py-1 rounded">${suggestion.status}</span>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">${suggestion.details}</p>
                    <div class="flex justify-between items-center text-xs text-gray-500 dark:text-gray-400">
                        <span>${suggestion.category}</span>
                        <span>${suggestion.date}</span>
                    </div>
                </div>
            `).join('');
        }

        // Teacher functions
        let selectedTeacherId = localStorage.getItem('edutracker_selected_teacher_id') || '';
        let teacherMessages = JSON.parse(localStorage.getItem('edutracker_teacher_messages')) || [];

        function selectTeacherId(id) {
            // Clear previous selection
            document.querySelectorAll('[id^="id-"]').forEach(btn => {
                btn.classList.remove('border-green-500', 'bg-green-50', 'dark:bg-green-900');
                btn.classList.add('border-gray-300', 'dark:border-gray-600');
            });
            
            // Highlight selected ID
            const selectedBtn = document.getElementById(`id-${id}`);
            selectedBtn.classList.remove('border-gray-300', 'dark:border-gray-600');
            selectedBtn.classList.add('border-green-500', 'bg-green-50', 'dark:bg-green-900');
            
            selectedTeacherId = id;
            localStorage.setItem('edutracker_selected_teacher_id', id);
            
            // Show selected ID info
            document.getElementById('selectedIdDisplay').textContent = id;
            document.getElementById('selectedIdInfo').classList.remove('hidden');
            
            renderTeacherMessages();
        }

        function renderTeacherMessages() {
            const container = document.getElementById('teacherMessageList');
            
            if (!selectedTeacherId) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500 dark:text-gray-400">
                        <div class="text-6xl mb-4">üì¨</div>
                        <p class="text-base">No messages from students yet</p>
                        <p class="text-sm text-gray-400">Select your ID above to start receiving messages</p>
                    </div>
                `;
                return;
            }

            const messagesForTeacher = teacherMessages.filter(msg => msg.teacherId === selectedTeacherId);
            
            if (messagesForTeacher.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-12 text-gray-500 dark:text-gray-400">
                        <div class="text-6xl mb-4">üì¨</div>
                        <p class="text-base">No messages for ID ${selectedTeacherId} yet</p>
                        <p class="text-sm text-gray-400">Students can send messages to your selected ID</p>
                    </div>
                `;
                return;
            }

            const sortedMessages = messagesForTeacher.sort((a, b) => b.id - a.id);

            container.innerHTML = sortedMessages.map(message => `
                <div class="bg-blue-50 dark:bg-gray-700 rounded-lg p-4 border-l-4 border-blue-500">
                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-2 mb-3">
                        <div class="flex-1">
                            <h3 class="font-semibold text-gray-900 dark:text-white text-lg">From Student</h3>
                            <p class="text-blue-600 dark:text-blue-400 font-medium">To ID: ${message.teacherId}</p>
                            <p class="text-gray-500 dark:text-gray-400 text-sm">${message.date} at ${message.time}</p>
                        </div>
                    </div>
                    <div class="bg-gray-100 dark:bg-gray-600 rounded-lg p-3">
                        <p class="text-gray-800 dark:text-gray-200">${message.content}</p>
                    </div>
                </div>
            `).join('');
        }

        // Initialize app
        function initApp() {
            const userType = localStorage.getItem('edutracker_usertype');
            
            // Check if user is logged in
            if (isLoggedIn) {
                if (userType === 'teacher') {
                    showTeacherApp();
                    if (selectedTeacherId) {
                        selectTeacherId(selectedTeacherId);
                    }
                    renderTeacherMessages();
                } else {
                    showMainApp();
                    renderSchedules();
                    renderInstructors();
                    renderAssignments();
                    renderMessages();
                    renderSuggestions();
                }
            } else {
                showLoginScreen();
            }
        }

        // Close modals when clicking outside
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('fixed')) {
                const modals = ['scheduleModal', 'assignmentModal', 'messageModal'];
                modals.forEach(modalId => {
                    if (e.target.id === modalId) {
                        hideModal(modalId);
                        if (modalId === 'messageModal') {
                            document.getElementById('messageForm').reset();
                        }
                    }
                });
            }
        });

        // Initialize the app
        initApp();
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'982010e1f467fed9',t:'MTc1ODM1ODEyOS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
